[下载使用：https://danmu.qincheng.work](https://danmu.qincheng.work)

# 抖音直播间弹幕监控与智能回复系统

[下载使用：https://danmu.qincheng.work](https://danmu.qincheng.work)

## 项目简介

这是一款专为抖音直播间运营者设计的弹幕监控与智能回复系统，具备实时弹幕捕获、智能回复生成、语音合成等核心功能。

## 核心功能

### 1. 网页嵌入显示
- 支持加载抖音直播间网页
- 处理登录验证和反爬机制
- 实时显示直播间内容

### 2. 弹幕实时监控
- 通过JS注入方式捕获弹幕
- 支持弹幕过滤和去重
- 实时显示弹幕列表

### 3. 智能回复生成
- 关键词触发自动回复
- 支持手动回复功能
- 文本回复 + 语音合成

### 4. 数据存储与管理
- SQLite数据库存储
- 弹幕和回复记录管理
- 统计信息展示

## 技术架构

### 技术栈
- **开发语言**: Python 3.8+
- **界面框架**: PyQt6
- **网页嵌入**: QWebEngineView
- **数据库**: SQLite3
- **语音合成**: pyttsx3
- **日志系统**: Python logging

### 模块结构
```
src/
├── main_window.py      # 主窗口界面
├── danmu_monitor.py    # 弹幕监控模块
├── reply_handler.py    # 智能回复模块
├── database.py         # 数据库管理
├── config_manager.py   # 配置管理
└── logger.py          # 日志系统
```

## 安装与配置

### 环境要求
- Python 3.8 或更高版本
- Windows 10/11 (推荐)
- 至少 4GB 内存

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd danmu
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行程序**
```bash
python main.py
```

### 依赖包说明
- `PyQt6`: 主界面框架
- `PyQt6-WebEngine`: 网页嵌入支持
- `requests`: HTTP请求处理
- `pyttsx3`: 语音合成
- `beautifulsoup4`: HTML解析
- `lxml`: XML/HTML解析器
- `python-dotenv`: 环境变量管理

## 使用指南

### 1. 启动程序
运行 `python main.py` 启动程序

### 2. 加载直播间
1. 在"直播间地址"输入框中输入抖音直播间链接
2. 点击"加载直播间"按钮
3. 等待页面加载完成

### 3. 开始监控
1. 点击"开始监控"按钮
2. 程序将开始捕获弹幕
3. 在"弹幕监控"标签页查看实时弹幕

### 4. 配置自动回复
1. 切换到"设置"标签页
2. 在"自动回复"区域配置关键词回复
3. 格式：`关键词=回复内容`，每行一个
4. 点击"保存设置"

### 5. 语音设置
1. 在"语音设置"区域调整语速和音量
2. 勾选"启用语音合成"
3. 点击"保存设置"

## 配置说明

### 配置文件 (config.json)
```json
{
    "database": {
        "path": "danmu_monitor.db"
    },
    "voice": {
        "engine": "pyttsx3",
        "rate": 200,
        "volume": 0.8,
        "voice_type": "female"
    },
    "danmu": {
        "filter_keywords": [],
        "filter_duplicate_seconds": 10,
        "min_user_level": 0
    },
    "reply": {
        "auto_reply_enabled": true,
        "keywords": {
            "怎么买": "点击左下角小黄车，选择对应链接即可下单～",
            "价格": "当前活动价可点击小黄车查看～"
        }
    }
}
```

## 功能特性

### 弹幕监控
- **实时捕获**: 通过JS注入监听弹幕数据
- **智能过滤**: 支持关键词过滤和重复弹幕过滤
- **用户分类**: 区分普通用户、管理员、主播
- **数据存储**: 自动保存到SQLite数据库

### 智能回复
- **关键词触发**: 基于关键词自动回复
- **手动回复**: 支持选中弹幕手动回复
- **语音合成**: 自动生成语音文件
- **回复记录**: 完整的回复历史记录

### 界面功能
- **实时显示**: 弹幕和回复实时更新
- **统计信息**: 弹幕数量、回复数量等统计
- **日志查看**: 程序运行日志实时查看
- **设置管理**: 图形化配置界面

## 注意事项

### 抖音反爬机制
- 程序使用JS注入方式获取弹幕，需要处理抖音的反爬机制
- 建议在正常使用环境下运行，避免频繁请求
- 如遇到登录验证，请在嵌入的网页中完成登录

### 性能优化
- 程序会限制弹幕列表长度（最多1000条）
- 定期清理重复弹幕检查缓存
- 语音文件会保存在本地，注意磁盘空间

### 兼容性
- 主要支持Windows平台
- 需要安装Microsoft Visual C++ Redistributable
- 建议使用Chrome内核的WebEngine

## 故障排除

### 常见问题

1. **程序无法启动**
   - 检查Python版本是否为3.8+
   - 确认所有依赖包已正确安装
   - 查看错误日志获取详细信息

2. **网页加载失败**
   - 检查网络连接
   - 确认直播间链接有效
   - 尝试刷新页面

3. **弹幕无法捕获**
   - 确认已点击"开始监控"
   - 检查直播间是否正常直播
   - 查看日志中的错误信息

4. **语音合成失败**
   - 确认pyttsx3已正确安装
   - 检查语音文件保存路径权限
   - 尝试调整语音参数

### 日志查看
程序运行日志保存在 `logs/` 目录下，按日期分割。可以在程序界面的"日志"标签页查看最新日志。

## 开发说明

### 项目结构
- `main.py`: 程序入口
- `src/main_window.py`: 主窗口界面
- `src/danmu_monitor.py`: 弹幕监控核心
- `src/reply_handler.py`: 回复处理逻辑
- `src/database.py`: 数据库操作
- `src/config_manager.py`: 配置管理
- `src/logger.py`: 日志系统

### 扩展开发
- 可以添加更多弹幕过滤规则
- 支持更多语音合成引擎
- 集成AI模型进行智能回复
- 添加更多数据统计功能

## 许可证

本项目仅供学习和研究使用，请遵守相关法律法规和平台规则。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件
- 项目讨论区

---

**免责声明**: 本软件仅供学习和研究使用，使用者需遵守相关法律法规和平台规则，不得用于违法违规用途。开发者不承担任何法律责任。









